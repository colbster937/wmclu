aHR0cHM6Ly9kcnY4MzVxd2x4d3F4LmNsb3VkZnJvbnQubmV0fDE3MjMzMzUwODcxNDg6PCFkb2N0eXBlIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KICAgIDxoZWFkPgogICAgICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04IiAvPgogICAgICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIiAvPgogICAgICAgIDxzdHlsZT4KICAgICAgICAgICAgYm9keSB7CiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogIkNvdXJpZXIgTmV3IiwgQ291cmllciwgbW9ub3NwYWNlOwogICAgICAgICAgICAgICAgY29sb3I6ICMwMGZmMDA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC5nbGl0Y2ggewogICAgICAgICAgICAgICAgZm9udC1zaXplOiA3MnB4OwogICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBnbGl0Y2gtYW5pbWF0aW9uIDFzIGluZmluaXRlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAuZ2xpdGNoOmJlZm9yZSwKICAgICAgICAgICAgLmdsaXRjaDphZnRlciB7CiAgICAgICAgICAgICAgICBjb250ZW50OiBhdHRyKGRhdGEtdGV4dCk7CiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgICAgICBsZWZ0OiAwOwogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgICAgICBhbmltYXRpb246IGdsaXRjaC1hbmltYXRpb24gMXMgaW5maW5pdGU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC5nbGl0Y2g6YmVmb3JlIHsKICAgICAgICAgICAgICAgIGxlZnQ6IDJweDsKICAgICAgICAgICAgICAgIHRleHQtc2hhZG93OiAtMnB4IDAgcmVkOwogICAgICAgICAgICAgICAgY2xpcDogcmVjdCgyNHB4LCA1NTBweCwgOTBweCwgMCk7CiAgICAgICAgICAgICAgICBhbmltYXRpb24tZGVsYXk6IC0wLjVzOwogICAgICAgICAgICB9CgogICAgICAgICAgICAuZ2xpdGNoOmFmdGVyIHsKICAgICAgICAgICAgICAgIGxlZnQ6IC0ycHg7CiAgICAgICAgICAgICAgICB0ZXh0LXNoYWRvdzogLTJweCAwIGJsdWU7CiAgICAgICAgICAgICAgICBjbGlwOiByZWN0KDg1cHgsIDU1MHB4LCAxNDBweCwgMCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBrZXlmcmFtZXMgZ2xpdGNoLWFuaW1hdGlvbiB7CiAgICAgICAgICAgICAgICAwJSB7CiAgICAgICAgICAgICAgICAgICAgY2xpcDogcmVjdCg0MnB4LCA5OTk5cHgsIDQ0cHgsIDApOwogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2tldygwLjJkZWcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgNSUgewogICAgICAgICAgICAgICAgICAgIGNsaXA6IHJlY3QoODRweCwgOTk5OXB4LCA4NXB4LCAwKTsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNrZXcoMC4xZGVnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIDEwJSB7CiAgICAgICAgICAgICAgICAgICAgY2xpcDogcmVjdCgzMnB4LCA5OTk5cHgsIDMzcHgsIDApOwogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2tldygwLjNkZWcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgMTUlIHsKICAgICAgICAgICAgICAgICAgICBjbGlwOiByZWN0KDY4cHgsIDk5OTlweCwgNzBweCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBza2V3KDAuNGRlZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAyMCUgewogICAgICAgICAgICAgICAgICAgIGNsaXA6IHJlY3QoMTJweCwgOTk5OXB4LCAxM3B4LCAwKTsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNrZXcoMC4xZGVnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIDI1JSB7CiAgICAgICAgICAgICAgICAgICAgY2xpcDogcmVjdCg3MnB4LCA5OTk5cHgsIDczcHgsIDApOwogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2tldygwLjJkZWcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgMzAlIHsKICAgICAgICAgICAgICAgICAgICBjbGlwOiByZWN0KDQycHgsIDk5OTlweCwgNDRweCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBza2V3KDAuMWRlZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAzNSUgewogICAgICAgICAgICAgICAgICAgIGNsaXA6IHJlY3QoNjhweCwgOTk5OXB4LCA3MHB4LCAwKTsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNrZXcoMC4zZGVnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIDQwJSB7CiAgICAgICAgICAgICAgICAgICAgY2xpcDogcmVjdCgzMnB4LCA5OTk5cHgsIDMzcHgsIDApOwogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2tldygwLjJkZWcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgNDUlIHsKICAgICAgICAgICAgICAgICAgICBjbGlwOiByZWN0KDg0cHgsIDk5OTlweCwgODVweCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBza2V3KDAuM2RlZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICA1MCUgewogICAgICAgICAgICAgICAgICAgIGNsaXA6IHJlY3QoMTJweCwgOTk5OXB4LCAxM3B4LCAwKTsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNrZXcoMC40ZGVnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIDU1JSB7CiAgICAgICAgICAgICAgICAgICAgY2xpcDogcmVjdCg3MnB4LCA5OTk5cHgsIDczcHgsIDApOwogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2tldygwLjJkZWcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgNjAlIHsKICAgICAgICAgICAgICAgICAgICBjbGlwOiByZWN0KDQycHgsIDk5OTlweCwgNDRweCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBza2V3KDAuMWRlZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICA2NSUgewogICAgICAgICAgICAgICAgICAgIGNsaXA6IHJlY3QoNjhweCwgOTk5OXB4LCA3MHB4LCAwKTsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNrZXcoMC4zZGVnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIDcwJSB7CiAgICAgICAgICAgICAgICAgICAgY2xpcDogcmVjdCgzMnB4LCA5OTk5cHgsIDMzcHgsIDApOwogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2tldygwLjJkZWcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgNzUlIHsKICAgICAgICAgICAgICAgICAgICBjbGlwOiByZWN0KDg0cHgsIDk5OTlweCwgODVweCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBza2V3KDAuMWRlZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICA4MCUgewogICAgICAgICAgICAgICAgICAgIGNsaXA6IHJlY3QoMTJweCwgOTk5OXB4LCAxM3B4LCAwKTsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNrZXcoMC40ZGVnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIDg1JSB7CiAgICAgICAgICAgICAgICAgICAgY2xpcDogcmVjdCg3MnB4LCA5OTk5cHgsIDczcHgsIDApOwogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2tldygwLjNkZWcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgOTAlIHsKICAgICAgICAgICAgICAgICAgICBjbGlwOiByZWN0KDQycHgsIDk5OTlweCwgNDRweCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBza2V3KDAuMmRlZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICA5NSUgewogICAgICAgICAgICAgICAgICAgIGNsaXA6IHJlY3QoNjhweCwgOTk5OXB4LCA3MHB4LCAwKTsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNrZXcoMC4xZGVnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIDEwMCUgewogICAgICAgICAgICAgICAgICAgIGNsaXA6IHJlY3QoMzJweCwgOTk5OXB4LCAzM3B4LCAwKTsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNrZXcoMC40ZGVnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLmJ0biB7CiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4OwogICAgICAgICAgICAgICAgcGFkZGluZzogMTBweCAyMHB4OwogICAgICAgICAgICAgICAgZm9udC1zaXplOiAyNHB4OwogICAgICAgICAgICAgICAgY29sb3I6ICMwMGZmMDA7CiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICMwMGZmMDA7CiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgICAgICBhbmltYXRpb246IGdsaXRjaC1hbmltYXRpb24gMXMgaW5maW5pdGU7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAwLjJzIGVhc2UtaW4tb3V0OwogICAgICAgICAgICB9CgogICAgICAgICAgICAuYnRuOmhvdmVyIHsKICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMjU1LCAwLCAwLjIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAuY29udGVudCB7CiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICAgIHRvcDogMDsKICAgICAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IGJsYWNrOwogICAgICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsKICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IGhpZGRlbjsKICAgICAgICAgICAgfQogICAgICAgIDwvc3R5bGU+CiAgICA8L2hlYWQ+CiAgICA8Ym9keT4KICAgICAgICA8ZGl2IGNsYXNzPSJjb250ZW50Ij4KICAgICAgICAgICAgPGgxIGNsYXNzPSJnbGl0Y2giIGRhdGEtdGV4dD0iV2ViTUMgTG9hZGVyIj5XZWJNQyBMb2FkZXI8L2gxPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4iIG9uY2xpY2s9Im9wZW5OZXdUYWIoKSI+T1BFTjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIDxzY3JpcHQ+CiAgICAgICAgICAgIGxldCBjdXJyZW50TGluayA9ICJodHRwczovL2RydjgzNXF3bHh3cXguY2xvdWRmcm9udC5uZXQiOwogICAgICAgICAgICBsZXQgYWJjMTIzID0gIlZ6TmlUVU5NTURSa00zSSI7CgogICAgICAgICAgICB3aW5kb3cubG9hZGVySFRNTCA9IGA8IURPQ1RZUEUgaHRtbD48aHRtbD48aGVhZD48c3R5bGU+QGtleWZyYW1lcyBmYWRlLWluezAle29wYWNpdHk6MDt9MTAwJXtvcGFjaXR5OjE7fX0ubG9hZGVye3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtiYWNrZ3JvdW5kOiAjMDAwO3otaW5kZXg6MTAwMDt0cmFuc2l0aW9uOm9wYWNpdHkgMC43NXMsdmlzaWJpbGl0eSAwLjc1czt9LmxvYWRlcjo6YWZ0ZXJ7Y29udGVudDoiIjt3aWR0aDo1MHB4O2hlaWdodDo1MHB4O2JvcmRlcjo1cHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXRvcC1jb2xvcjojMDBGRjAwO2JvcmRlci1yYWRpdXM6NTAlO2FuaW1hdGlvbjpsb2FkaW5nIDAuNzVzIGxpbmVhciBpbmZpbml0ZTt9LmxvYWRlci0taGlkZGVue29wYWNpdHk6MDt2aXNpYmlsaXR5OmhpZGRlbjt9QGtleWZyYW1lcyBsb2FkaW5nezAle3RyYW5zZm9ybTpyb3RhdGUoMHR1cm4pO30xMDAle3RyYW5zZm9ybTpyb3RhdGUoMXR1cm4pO319PC9zdHlsZT48L2hlYWQ+PGJvZHk+PGRpdiBjbGFzcz0ibG9hZGVyIj48L2Rpdj48L2JvZHk+PC9odG1sPmA7CgogICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVDaGVjaygpIHsKICAgICAgICAgICAgICAgIGZldGNoKAogICAgICAgICAgICAgICAgICAgICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vY29sYnljaGl0dGVuZGVuL3dtY2x1L21haW4vdXBkYXRlIiwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLnRleHQoKSkKICAgICAgICAgICAgICAgICAgICAudGhlbigoZmV0Y2hlZFRleHQpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHMgPSBhdG9iKGZldGNoZWRUZXh0KS50cmltKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpID0gcy5pbmRleE9mKCJ8Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1cGRhdGUgPSBbcy5zbGljZSgwLCBpKSwgcy5zbGljZShpICsgMSldOwogICAgICAgICAgICAgICAgICAgICAgICBzID0gdXBkYXRlWzFdOwogICAgICAgICAgICAgICAgICAgICAgICBpID0gcy5pbmRleE9mKCI6Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIFtkYXRlLCB1cGRhdGVbMV1dID0gW3Muc2xpY2UoMCwgaSksIHMuc2xpY2UoaSArIDEpXTsKICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKHBhcnNlRmxvYXQoZGF0ZSkpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gYCR7ZGF0ZS5nZXRGdWxsWWVhcigpfV8ke1N0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAiMCIpfV8ke1N0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgIjAiKX1gOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlWzBdICE9PSBjdXJyZW50TGluay50cmltKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgQW4gdXBkYXRlIGlzIGF2YWlsYWJsZSFgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgQW4gdXBkYXRlIGlzIGF2YWlsYWJsZSFcbkRvd25sb2FkIG5vdz9gLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtmaWxlLCBleHRdID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zcGxpdCgiLyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wb3AoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoIi4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZEZpbGUoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAke2ZpbGV9XyR7Zm9ybWF0dGVkRGF0ZX0uJHtleHR9YCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiWW91J3JlIG9uIHRoZSBsYXRlc3QgdmVyc2lvbiEiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBmZXRjaGluZyB0aGUgVVJMOiIsIGVycm9yKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAvL1czYk1DTDA0ZDNyCiAgICAgICAgICAgICAgICB2YXIgcSA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7CiAgICAgICAgICAgICAgICBxID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhxKTsKICAgICAgICAgICAgICAgIHZhciBwYXNzID0gcS5nZXQoInBhc3MiKTsKICAgICAgICAgICAgICAgIGlmIChwYXNzKSB7CiAgICAgICAgICAgICAgICAgICAgbG9naW4oZmFsc2UsIGZhbHNlLCBwYXNzKTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKGxvY2F0aW9uLnNlYXJjaCwgIiIpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICghc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgibG9nZ2VkSW4iKSkgewogICAgICAgICAgICAgICAgICAgIGxvZ2luKGZhbHNlLCB0cnVlLCBmYWxzZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIuY29udGVudCIpLnN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSI7CiAgICAgICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9ICJOZXcgVGFiIjsKICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgPT0gImZpbGU6IikgewogICAgICAgICAgICAgICAgICAgIGlmIChwYXNzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWYucmVwbGFjZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnNlYXJjaCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUNoZWNrKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpZiAocGFzcykgaGlzdG9yeS5yZXBsYWNlU3RhdGUoIi8iLCAiLyIsICIvIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgZnVuY3Rpb24gbG9naW4oc3RhdGUsIHNob3csIHBhc3MpIHsKICAgICAgICAgICAgICAgIGxvZ2dlZEluID0gc3RhdGU7CiAgICAgICAgICAgICAgICB3aGlsZSAoIWxvZ2dlZEluKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXNzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVudGVyZWRwYXNzID0gcHJvbXB0KCJQbGVhc2UgbG9nIGluISIpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVudGVyZWRwYXNzID0gYXRvYihwYXNzKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGVudGVyZWRwYXNzID09IGF0b2IoYWJjMTIzKSkgewogICAgICAgICAgICAgICAgICAgICAgICBsb2dnZWRJbiA9ICFsb2dnZWRJbjsKICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgibG9nZ2VkSW4iLCBsb2dnZWRJbik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaG93KSBhbGVydCgiQ29ycmVjdCBQYXNzd29yZCEiKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVudGVyZWRwYXNzID09ICIiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaG93KSBhbGVydCgiUGxlYXNlIGVudGVyIGEgcGFzc3dvcmQhIik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIklub3JyZWN0IFBhc3N3b3JkISIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gZG93bmxvYWRGaWxlKGZpbGVOYW1lLCBjb250ZW50KSB7CiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2NvbnRlbnRdLCB7IHR5cGU6ICJ0ZXh0L2h0bWwiIH0pOwogICAgICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKICAgICAgICAgICAgICAgIGNvbnN0IG9iamVjdFVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CgogICAgICAgICAgICAgICAgbGluay5ocmVmID0gb2JqZWN0VXJsOwogICAgICAgICAgICAgICAgbGluay5kb3dubG9hZCA9IGZpbGVOYW1lOwoKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7CiAgICAgICAgICAgICAgICBsaW5rLmNsaWNrKCk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspOwoKICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwob2JqZWN0VXJsKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gb3Blbk5ld1RhYigpIHsKICAgICAgICAgICAgICAgIGNvbnN0IG5ld0Fib3V0QmxhbmtXaW5kb3cgPSB3aW5kb3cub3BlbigKICAgICAgICAgICAgICAgICAgICAiYWJvdXQ6YmxhbmsiLAogICAgICAgICAgICAgICAgICAgICJfYmxhbmsiLAogICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICBjb25zdCBsb2FkaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7CiAgICAgICAgICAgICAgICBsb2FkaWZyYW1lLnNyY2RvYyA9IHdpbmRvdy5sb2FkZXJIVE1MOwogICAgICAgICAgICAgICAgbG9hZGlmcmFtZS5zdHlsZS5ib3JkZXIgPSAibm9uZSI7CiAgICAgICAgICAgICAgICBsb2FkaWZyYW1lLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsKICAgICAgICAgICAgICAgIGxvYWRpZnJhbWUuc3R5bGUubGVmdCA9IDA7CiAgICAgICAgICAgICAgICBsb2FkaWZyYW1lLnN0eWxlLnRvcCA9IDA7CiAgICAgICAgICAgICAgICBsb2FkaWZyYW1lLnN0eWxlLndpZHRoID0gIjEwMCUiOwogICAgICAgICAgICAgICAgbG9hZGlmcmFtZS5zdHlsZS5oZWlnaHQgPSAiMTAwJSI7CiAgICAgICAgICAgICAgICBsb2FkaWZyYW1lLmFsbG93ID0gImZ1bGxzY3JlZW4iOwogICAgICAgICAgICAgICAgbG9hZGlmcmFtZS5yZWZlcnJlcnBvbGljeSA9ICJuby1yZWZlcnJlciI7CiAgICAgICAgICAgICAgICBsb2FkaWZyYW1lLnN0eWxlLm1hcmdpbiA9ICIwIjsKICAgICAgICAgICAgICAgIGxvYWRpZnJhbWUuc3R5bGUucGFkZGluZyA9ICIwIjsKICAgICAgICAgICAgICAgIGxvYWRpZnJhbWUuc3R5bGUuekluZGV4ID0gIjUiOwoKICAgICAgICAgICAgICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpOwogICAgICAgICAgICAgICAgaWZyYW1lLnNyYyA9IGN1cnJlbnRMaW5rOwogICAgICAgICAgICAgICAgaWZyYW1lLnN0eWxlLmJvcmRlciA9ICJub25lIjsKICAgICAgICAgICAgICAgIGlmcmFtZS5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7CiAgICAgICAgICAgICAgICBpZnJhbWUuc3R5bGUubGVmdCA9IDA7CiAgICAgICAgICAgICAgICBpZnJhbWUuc3R5bGUudG9wID0gMDsKICAgICAgICAgICAgICAgIGlmcmFtZS5zdHlsZS53aWR0aCA9ICIxMDAlIjsKICAgICAgICAgICAgICAgIGlmcmFtZS5zdHlsZS5oZWlnaHQgPSAiMTAwJSI7CiAgICAgICAgICAgICAgICBpZnJhbWUuYWxsb3cgPSAiZnVsbHNjcmVlbiI7CiAgICAgICAgICAgICAgICBpZnJhbWUucmVmZXJyZXJwb2xpY3kgPSAibm8tcmVmZXJyZXIiOwogICAgICAgICAgICAgICAgaWZyYW1lLnN0eWxlLm1hcmdpbiA9ICIwIjsKICAgICAgICAgICAgICAgIGlmcmFtZS5zdHlsZS5wYWRkaW5nID0gIjAiOwogICAgICAgICAgICAgICAgaWZyYW1lLnN0eWxlLnpJbmRleCA9ICIxMCI7CgogICAgICAgICAgICAgICAgbmV3QWJvdXRCbGFua1dpbmRvdy5kb2N1bWVudC5ib2R5LnN0eWxlLm1hcmdpbiA9ICIwIjsKICAgICAgICAgICAgICAgIG5ld0Fib3V0QmxhbmtXaW5kb3cuZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICJoaWRkZW4iOwogICAgICAgICAgICAgICAgbmV3QWJvdXRCbGFua1dpbmRvdy5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxvYWRpZnJhbWUpOwogICAgICAgICAgICAgICAgbmV3QWJvdXRCbGFua1dpbmRvdy5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7CgogICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oIiIsICJfc2VsZiIpLmNsb3NlKCk7CiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICJhYm91dDpibGFuayI7CiAgICAgICAgICAgIH0KICAgICAgICA8L3NjcmlwdD4KICAgIDwvYm9keT4KPC9odG1sPgo
