aHR0cHM6Ly9kcnY4MzVxd2x4d3F4LmNsb3VkZnJvbnQubmV0fDE3MjMzMzM2MzE1NzE6PCFkb2N0eXBlIGh0bWw-CjxodG1sIGxhbmc9ImVuIj4KICAgIDxoZWFkPgogICAgICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04IiAvPgogICAgICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIiAvPgogICAgICAgIDxzdHlsZT4KICAgICAgICAgICAgYm9keSB7CiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogIkNvdXJpZXIgTmV3IiwgQ291cmllciwgbW9ub3NwYWNlOwogICAgICAgICAgICAgICAgY29sb3I6ICMwMGZmMDA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC5nbGl0Y2ggewogICAgICAgICAgICAgICAgZm9udC1zaXplOiA3MnB4OwogICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBnbGl0Y2gtYW5pbWF0aW9uIDFzIGluZmluaXRlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAuZ2xpdGNoOmJlZm9yZSwKICAgICAgICAgICAgLmdsaXRjaDphZnRlciB7CiAgICAgICAgICAgICAgICBjb250ZW50OiBhdHRyKGRhdGEtdGV4dCk7CiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgICAgICBsZWZ0OiAwOwogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgICAgICBhbmltYXRpb246IGdsaXRjaC1hbmltYXRpb24gMXMgaW5maW5pdGU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC5nbGl0Y2g6YmVmb3JlIHsKICAgICAgICAgICAgICAgIGxlZnQ6IDJweDsKICAgICAgICAgICAgICAgIHRleHQtc2hhZG93OiAtMnB4IDAgcmVkOwogICAgICAgICAgICAgICAgY2xpcDogcmVjdCgyNHB4LCA1NTBweCwgOTBweCwgMCk7CiAgICAgICAgICAgICAgICBhbmltYXRpb24tZGVsYXk6IC0wLjVzOwogICAgICAgICAgICB9CgogICAgICAgICAgICAuZ2xpdGNoOmFmdGVyIHsKICAgICAgICAgICAgICAgIGxlZnQ6IC0ycHg7CiAgICAgICAgICAgICAgICB0ZXh0LXNoYWRvdzogLTJweCAwIGJsdWU7CiAgICAgICAgICAgICAgICBjbGlwOiByZWN0KDg1cHgsIDU1MHB4LCAxNDBweCwgMCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIEBrZXlmcmFtZXMgZ2xpdGNoLWFuaW1hdGlvbiB7CiAgICAgICAgICAgICAgICAwJSB7CiAgICAgICAgICAgICAgICAgICAgY2xpcDogcmVjdCg0MnB4LCA5OTk5cHgsIDQ0cHgsIDApOwogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2tldygwLjJkZWcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgNSUgewogICAgICAgICAgICAgICAgICAgIGNsaXA6IHJlY3QoODRweCwgOTk5OXB4LCA4NXB4LCAwKTsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNrZXcoMC4xZGVnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIDEwJSB7CiAgICAgICAgICAgICAgICAgICAgY2xpcDogcmVjdCgzMnB4LCA5OTk5cHgsIDMzcHgsIDApOwogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2tldygwLjNkZWcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgMTUlIHsKICAgICAgICAgICAgICAgICAgICBjbGlwOiByZWN0KDY4cHgsIDk5OTlweCwgNzBweCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBza2V3KDAuNGRlZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAyMCUgewogICAgICAgICAgICAgICAgICAgIGNsaXA6IHJlY3QoMTJweCwgOTk5OXB4LCAxM3B4LCAwKTsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNrZXcoMC4xZGVnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIDI1JSB7CiAgICAgICAgICAgICAgICAgICAgY2xpcDogcmVjdCg3MnB4LCA5OTk5cHgsIDczcHgsIDApOwogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2tldygwLjJkZWcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgMzAlIHsKICAgICAgICAgICAgICAgICAgICBjbGlwOiByZWN0KDQycHgsIDk5OTlweCwgNDRweCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBza2V3KDAuMWRlZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAzNSUgewogICAgICAgICAgICAgICAgICAgIGNsaXA6IHJlY3QoNjhweCwgOTk5OXB4LCA3MHB4LCAwKTsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNrZXcoMC4zZGVnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIDQwJSB7CiAgICAgICAgICAgICAgICAgICAgY2xpcDogcmVjdCgzMnB4LCA5OTk5cHgsIDMzcHgsIDApOwogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2tldygwLjJkZWcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgNDUlIHsKICAgICAgICAgICAgICAgICAgICBjbGlwOiByZWN0KDg0cHgsIDk5OTlweCwgODVweCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBza2V3KDAuM2RlZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICA1MCUgewogICAgICAgICAgICAgICAgICAgIGNsaXA6IHJlY3QoMTJweCwgOTk5OXB4LCAxM3B4LCAwKTsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNrZXcoMC40ZGVnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIDU1JSB7CiAgICAgICAgICAgICAgICAgICAgY2xpcDogcmVjdCg3MnB4LCA5OTk5cHgsIDczcHgsIDApOwogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2tldygwLjJkZWcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgNjAlIHsKICAgICAgICAgICAgICAgICAgICBjbGlwOiByZWN0KDQycHgsIDk5OTlweCwgNDRweCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBza2V3KDAuMWRlZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICA2NSUgewogICAgICAgICAgICAgICAgICAgIGNsaXA6IHJlY3QoNjhweCwgOTk5OXB4LCA3MHB4LCAwKTsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNrZXcoMC4zZGVnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIDcwJSB7CiAgICAgICAgICAgICAgICAgICAgY2xpcDogcmVjdCgzMnB4LCA5OTk5cHgsIDMzcHgsIDApOwogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2tldygwLjJkZWcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgNzUlIHsKICAgICAgICAgICAgICAgICAgICBjbGlwOiByZWN0KDg0cHgsIDk5OTlweCwgODVweCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBza2V3KDAuMWRlZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICA4MCUgewogICAgICAgICAgICAgICAgICAgIGNsaXA6IHJlY3QoMTJweCwgOTk5OXB4LCAxM3B4LCAwKTsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNrZXcoMC40ZGVnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIDg1JSB7CiAgICAgICAgICAgICAgICAgICAgY2xpcDogcmVjdCg3MnB4LCA5OTk5cHgsIDczcHgsIDApOwogICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2tldygwLjNkZWcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgOTAlIHsKICAgICAgICAgICAgICAgICAgICBjbGlwOiByZWN0KDQycHgsIDk5OTlweCwgNDRweCwgMCk7CiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBza2V3KDAuMmRlZyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICA5NSUgewogICAgICAgICAgICAgICAgICAgIGNsaXA6IHJlY3QoNjhweCwgOTk5OXB4LCA3MHB4LCAwKTsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNrZXcoMC4xZGVnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIDEwMCUgewogICAgICAgICAgICAgICAgICAgIGNsaXA6IHJlY3QoMzJweCwgOTk5OXB4LCAzM3B4LCAwKTsKICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNrZXcoMC40ZGVnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLmJ0biB7CiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4OwogICAgICAgICAgICAgICAgcGFkZGluZzogMTBweCAyMHB4OwogICAgICAgICAgICAgICAgZm9udC1zaXplOiAyNHB4OwogICAgICAgICAgICAgICAgY29sb3I6ICMwMGZmMDA7CiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICMwMGZmMDA7CiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgICAgICBhbmltYXRpb246IGdsaXRjaC1hbmltYXRpb24gMXMgaW5maW5pdGU7CiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAwLjJzIGVhc2UtaW4tb3V0OwogICAgICAgICAgICB9CgogICAgICAgICAgICAuYnRuOmhvdmVyIHsKICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMjU1LCAwLCAwLjIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAuY29udGVudCB7CiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgICAgIHRvcDogMDsKICAgICAgICAgICAgICAgIGxlZnQ6IDA7CiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IGJsYWNrOwogICAgICAgICAgICAgICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjsKICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IGhpZGRlbjsKICAgICAgICAgICAgfQogICAgICAgIDwvc3R5bGU-CiAgICA8L2hlYWQ-CiAgICA8Ym9keT4KICAgICAgICA8ZGl2IGNsYXNzPSJjb250ZW50Ij4KICAgICAgICAgICAgPGgxIGNsYXNzPSJnbGl0Y2giIGRhdGEtdGV4dD0iV2ViTUMgTG9hZGVyIj5XZWJNQyBMb2FkZXI8L2gxPgogICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4iIG9uY2xpY2s9Im9wZW5OZXdUYWIoKSI-T1BFTjwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICAgIDxzY3JpcHQ-CiAgICAgICAgICAgIGxldCBjdXJyZW50TGluayA9ICJodHRwczovL2RydjgzNXF3bHh3cXguY2xvdWRmcm9udC5uZXQiOwogICAgICAgICAgICBsZXQgYWJjMTIzID0gIlZ6TmlUVU5NTURSa00zSSI7CgogICAgICAgICAgICB3aW5kb3cubG9hZGVySFRNTCA9IGA8IURPQ1RZUEUgaHRtbD48aHRtbD48aGVhZD48c3R5bGU-QGtleWZyYW1lcyBmYWRlLWluezAle29wYWNpdHk6MDt9MTAwJXtvcGFjaXR5OjE7fX0ubG9hZGVye3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtiYWNrZ3JvdW5kOiAjMDAwO3otaW5kZXg6MTAwMDt0cmFuc2l0aW9uOm9wYWNpdHkgMC43NXMsdmlzaWJpbGl0eSAwLjc1czt9LmxvYWRlcjo6YWZ0ZXJ7Y29udGVudDoiIjt3aWR0aDo1MHB4O2hlaWdodDo1MHB4O2JvcmRlcjo1cHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXRvcC1jb2xvcjojMDBGRjAwO2JvcmRlci1yYWRpdXM6NTAlO2FuaW1hdGlvbjpsb2FkaW5nIDAuNzVzIGxpbmVhciBpbmZpbml0ZTt9LmxvYWRlci0taGlkZGVue29wYWNpdHk6MDt2aXNpYmlsaXR5OmhpZGRlbjt9QGtleWZyYW1lcyBsb2FkaW5nezAle3RyYW5zZm9ybTpyb3RhdGUoMHR1cm4pO30xMDAle3RyYW5zZm9ybTpyb3RhdGUoMXR1cm4pO319PC9zdHlsZT48L2hlYWQ-PGJvZHk-PGRpdiBjbGFzcz0ibG9hZGVyIj48L2Rpdj48L2JvZHk-PC9odG1sPmA7CgogICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVDaGVjaygpIHsKICAgICAgICAgICAgICAgIGZldGNoKAogICAgICAgICAgICAgICAgICAgICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vY29sYnljaGl0dGVuZGVuL3dtY3UvbWFpbi91cGRhdGUiLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UudGV4dCgpKQogICAgICAgICAgICAgICAgICAgIC50aGVuKChmZXRjaGVkVGV4dCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcyA9IGF0b2IoZmV0Y2hlZFRleHQpLnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSBzLmluZGV4T2YoInwiKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVwZGF0ZSA9IFtzLnNsaWNlKDAsIGkpLCBzLnNsaWNlKGkgKyAxKV07CiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSB1cGRhdGVbMV07CiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBzLmluZGV4T2YoIjoiKTsKICAgICAgICAgICAgICAgICAgICAgICAgW2RhdGUsIHVwZGF0ZVsxXV0gPSBbcy5zbGljZSgwLCBpKSwgcy5zbGljZShpICsgMSldOwogICAgICAgICAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUocGFyc2VGbG9hdChkYXRlKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBgJHtkYXRlLmdldEZ1bGxZZWFyKCl9XyR7U3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICIwIil9XyR7U3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAiMCIpfWA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVbMF0gIT09IGN1cnJlbnRMaW5rLnRyaW0oKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBBbiB1cGRhdGUgaXMgYXZhaWxhYmxlIWApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm0oCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBBbiB1cGRhdGUgaXMgYXZhaWxhYmxlIVxuRG93bmxvYWQgbm93P2AsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2ZpbGUsIGV4dF0gPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KCIvIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBvcCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zcGxpdCgiLiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkRmlsZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7ZmlsZX1fJHtmb3JtYXR0ZWREYXRlfS4ke2V4dH1gLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJZb3UncmUgb24gdGhlIGxhdGVzdCB2ZXJzaW9uISIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGZldGNoaW5nIHRoZSBVUkw6IiwgZXJyb3IpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIC8vVzNiTUNMMDRkM3IKICAgICAgICAgICAgICAgIHZhciBxID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDsKICAgICAgICAgICAgICAgIHEgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHEpOwogICAgICAgICAgICAgICAgdmFyIHBhc3MgPSBxLmdldCgicGFzcyIpOwogICAgICAgICAgICAgICAgaWYgKHBhc3MpIHsKICAgICAgICAgICAgICAgICAgICBsb2dpbihmYWxzZSwgZmFsc2UsIHBhc3MpOwogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmLnJlcGxhY2UobG9jYXRpb24uc2VhcmNoLCAiIik7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJsb2dnZWRJbiIpKSB7CiAgICAgICAgICAgICAgICAgICAgbG9naW4oZmFsc2UsIHRydWUsIGZhbHNlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5jb250ZW50Iikuc3R5bGUudmlzaWJpbGl0eSA9ICJ2aXNpYmxlIjsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gIk5ldyBUYWIiOwogICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PSAiZmlsZToiKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBhc3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uc2VhcmNoLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlQ2hlY2soKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmIChwYXNzKSBoaXN0b3J5LnJlcGxhY2VTdGF0ZSgiLyIsICIvIiwgIi8iKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBmdW5jdGlvbiBsb2dpbihzdGF0ZSwgc2hvdywgcGFzcykgewogICAgICAgICAgICAgICAgbG9nZ2VkSW4gPSBzdGF0ZTsKICAgICAgICAgICAgICAgIHdoaWxlICghbG9nZ2VkSW4pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXBhc3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZW50ZXJlZHBhc3MgPSBwcm9tcHQoIlBsZWFzZSBsb2cgaW4hIik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgZW50ZXJlZHBhc3MgPSBhdG9iKHBhc3MpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoZW50ZXJlZHBhc3MgPT0gYXRvYihhYmMxMjMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlZEluID0gIWxvZ2dlZEluOwogICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJsb2dnZWRJbiIsIGxvZ2dlZEluKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNob3cpIGFsZXJ0KCJDb3JyZWN0IFBhc3N3b3JkISIpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZW50ZXJlZHBhc3MgPT0gIiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNob3cpIGFsZXJ0KCJQbGVhc2UgZW50ZXIgYSBwYXNzd29yZCEiKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgiSW5vcnJlY3QgUGFzc3dvcmQhIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBkb3dubG9hZEZpbGUoZmlsZU5hbWUsIGNvbnRlbnQpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY29udGVudF0sIHsgdHlwZTogInRleHQvaHRtbCIgfSk7CiAgICAgICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwogICAgICAgICAgICAgICAgY29uc3Qgb2JqZWN0VXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKCiAgICAgICAgICAgICAgICBsaW5rLmhyZWYgPSBvYmplY3RVcmw7CiAgICAgICAgICAgICAgICBsaW5rLmRvd25sb2FkID0gZmlsZU5hbWU7CgogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKTsKICAgICAgICAgICAgICAgIGxpbmsuY2xpY2soKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7CgogICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChvYmplY3RVcmwpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBvcGVuTmV3VGFiKCkgewogICAgICAgICAgICAgICAgY29uc3QgbmV3QWJvdXRCbGFua1dpbmRvdyA9IHdpbmRvdy5vcGVuKAogICAgICAgICAgICAgICAgICAgICJhYm91dDpibGFuayIsCiAgICAgICAgICAgICAgICAgICAgIl9ibGFuayIsCiAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgIGNvbnN0IGxvYWRpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTsKICAgICAgICAgICAgICAgIGxvYWRpZnJhbWUuc3JjZG9jID0gd2luZG93LmxvYWRlckhUTUw7CiAgICAgICAgICAgICAgICBsb2FkaWZyYW1lLnN0eWxlLmJvcmRlciA9ICJub25lIjsKICAgICAgICAgICAgICAgIGxvYWRpZnJhbWUuc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwogICAgICAgICAgICAgICAgbG9hZGlmcmFtZS5zdHlsZS5sZWZ0ID0gMDsKICAgICAgICAgICAgICAgIGxvYWRpZnJhbWUuc3R5bGUudG9wID0gMDsKICAgICAgICAgICAgICAgIGxvYWRpZnJhbWUuc3R5bGUud2lkdGggPSAiMTAwJSI7CiAgICAgICAgICAgICAgICBsb2FkaWZyYW1lLnN0eWxlLmhlaWdodCA9ICIxMDAlIjsKICAgICAgICAgICAgICAgIGxvYWRpZnJhbWUuYWxsb3cgPSAiZnVsbHNjcmVlbiI7CiAgICAgICAgICAgICAgICBsb2FkaWZyYW1lLnJlZmVycmVycG9saWN5ID0gIm5vLXJlZmVycmVyIjsKICAgICAgICAgICAgICAgIGxvYWRpZnJhbWUuc3R5bGUubWFyZ2luID0gIjAiOwogICAgICAgICAgICAgICAgbG9hZGlmcmFtZS5zdHlsZS5wYWRkaW5nID0gIjAiOwogICAgICAgICAgICAgICAgbG9hZGlmcmFtZS5zdHlsZS56SW5kZXggPSAiNSI7CgogICAgICAgICAgICAgICAgY29uc3QgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7CiAgICAgICAgICAgICAgICBpZnJhbWUuc3JjID0gY3VycmVudExpbms7CiAgICAgICAgICAgICAgICBpZnJhbWUuc3R5bGUuYm9yZGVyID0gIm5vbmUiOwogICAgICAgICAgICAgICAgaWZyYW1lLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsKICAgICAgICAgICAgICAgIGlmcmFtZS5zdHlsZS5sZWZ0ID0gMDsKICAgICAgICAgICAgICAgIGlmcmFtZS5zdHlsZS50b3AgPSAwOwogICAgICAgICAgICAgICAgaWZyYW1lLnN0eWxlLndpZHRoID0gIjEwMCUiOwogICAgICAgICAgICAgICAgaWZyYW1lLnN0eWxlLmhlaWdodCA9ICIxMDAlIjsKICAgICAgICAgICAgICAgIGlmcmFtZS5hbGxvdyA9ICJmdWxsc2NyZWVuIjsKICAgICAgICAgICAgICAgIGlmcmFtZS5yZWZlcnJlcnBvbGljeSA9ICJuby1yZWZlcnJlciI7CiAgICAgICAgICAgICAgICBpZnJhbWUuc3R5bGUubWFyZ2luID0gIjAiOwogICAgICAgICAgICAgICAgaWZyYW1lLnN0eWxlLnBhZGRpbmcgPSAiMCI7CiAgICAgICAgICAgICAgICBpZnJhbWUuc3R5bGUuekluZGV4ID0gIjEwIjsKCiAgICAgICAgICAgICAgICBuZXdBYm91dEJsYW5rV2luZG93LmRvY3VtZW50LmJvZHkuc3R5bGUubWFyZ2luID0gIjAiOwogICAgICAgICAgICAgICAgbmV3QWJvdXRCbGFua1dpbmRvdy5kb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gImhpZGRlbiI7CiAgICAgICAgICAgICAgICBuZXdBYm91dEJsYW5rV2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobG9hZGlmcmFtZSk7CiAgICAgICAgICAgICAgICBuZXdBYm91dEJsYW5rV2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTsKCiAgICAgICAgICAgICAgICB3aW5kb3cub3BlbigiIiwgIl9zZWxmIikuY2xvc2UoKTsKICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gImFib3V0OmJsYW5rIjsKICAgICAgICAgICAgfQogICAgICAgIDwvc2NyaXB0PgogICAgPC9ib2R5Pgo8L2h0bWw-Cg
